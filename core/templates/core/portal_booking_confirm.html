{% extends "core/base.html" %}
{% block content %}
<h2 class="mb-3">Booking submitted</h2>
<p>Service: <strong>{{ ctx.service }}</strong></p>
<p>When: <strong>{{ ctx.start|date:"Y-m-d H:i" }}</strong> â€“ <strong>{{ ctx.end|date:"Y-m-d H:i" }}</strong> (AEST)</p>

{% if ctx.due %}
  <div class="alert alert-info">
    A payment is due for this booking.
    {% if ctx.invoice_url %}
      <div class="mt-2">
        <a class="btn btn-primary" href="{{ ctx.invoice_url }}" target="_blank" rel="noopener">Open invoice</a>
      </div>
    {% else %}
      <div class="small text-muted mt-2">An invoice has been created. If the link isn't available yet, it will appear shortly.</div>
    {% endif %}
  </div>
{% else %}
  <div class="alert alert-success">This booking is fully covered by your client credit. No payment is due.</div>
{% endif %}

<div class="mt-3">
  <a class="btn btn-outline-primary" href="{% url 'portal_home' %}">Back to My Bookings</a>
  <a class="btn btn-outline-secondary" href="{% url 'portal_booking_create' %}">Make another booking</a>
  <a class="btn btn-outline-success" href="{% url 'booking_export_ics' %}?ids={{ ctx.booking_id }}">Add to calendar (.ics)</a>
  <!-- note: booking_export_ics supports selected IDs -->
</div>
{% endblock %}