{% extends "core/base.html" %}
{% load money_filters %}
{% block content %}
<div class="d-flex align-items-center mb-3">
  <h2 class="mb-0">Booking created</h2>
  <div class="ms-auto">
    <span class="badge text-bg-secondary" title="Remaining credit">
      Credit: {{ client_credit_cents|cents_to_dollars }}
    </span>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <div class="row g-2">
      <div class="col-md-6">
        <div><strong>Service:</strong> {{ data.service }}</div>
        <div><strong>Start:</strong> {{ data.start }}</div>
        <div><strong>End:</strong> {{ data.end }}</div>
      </div>
      <div class="col-md-6">
        {% if data.due %}
          {% if data.invoice_url %}
            <a class="btn btn-primary" href="{{ data.invoice_url }}" target="_blank" rel="noopener">Open invoice</a>
          {% else %}
            <div class="alert alert-info mt-2" role="alert">
              A payment is due, but the invoice link isn't available yet. Please refresh in a few seconds.
            </div>
          {% endif %}
        {% else %}
          <div class="alert alert-success mt-2" role="alert">
            Covered by credit â€” no payment due.
          </div>
        {% endif %}
      </div>
    </div>
    <div class="mt-3">
      <a class="btn btn-outline-secondary" href="{% url 'portal_home' %}">Back to portal</a>
    </div>
  </div>
</div>
{% endblock %}