{% extends "base.html" %}
{% block content %}
<div class="row mb-12">
  <h1>Your Calendar</h1>
  <div class="right actions">
    <a class="btn" href="{% url 'portal_home' %}">Back to Dashboard</a>
    <a class="btn primary" href="{% url 'portal_book' %}">Book a Walk</a>
  </div>
  <div class="sep"></div>
</div>

<section class="card">
  {% if upcoming %}
    <table class="clean" aria-label="Upcoming bookings">
      <thead>
        <tr><th>Date</th><th>Time</th><th>Service</th><th>Status</th><th></th></tr>
      </thead>
      <tbody>
        {% for b in upcoming %}
          <tr>
            <td class="mono">{{ b.start_dt|date:"Y-m-d (D)" }}</td>
            <td class="mono">{{ b.start_dt|time:"H:i" }} â†’ {{ b.end_dt|time:"H:i" }}</td>
            <td>{{ b.service.name|default:b.service_name }}</td>
            <td>{% if b.requires_admin_review %}<span class="chip warn">under review</span>{% else %}<span class="chip ok">ok</span>{% endif %}</td>
            <td class="right">{% if b.invoice_pdf_url %}<a class="btn" href="{{ b.invoice_pdf_url }}" target="_blank" rel="noopener">Invoice</a>{% endif %}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="empty">No items in the next 90 days.</div>
  {% endif %}
</section>
{% endblock %}

